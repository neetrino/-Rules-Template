# Технологическая карта проекта

> Заполняется AI после анализа `docs/BRIEF.md` на этапе планирования.
> Каждый пункт — предложение AI + подтверждение разработчика.
> **Не начинай код до утверждения карты.**

**Проект:** [Название]
**Размер:** [A / B / C]
**Дата:** YYYY-MM-DD
**Статус:** черновик / утверждено

---

## 1. Основа

| # | Параметр | Решение | Примечание |
|---|----------|---------|------------|
| 1.1 | Размер проекта | A / B / C | |
| 1.2 | Архитектура | Простая / Feature-based / Monorepo | |
| 1.3 | Package manager | pnpm | стандарт |
| 1.4 | Node.js | 20.x LTS | |
| 1.5 | TypeScript | 5.x, strict: true | |
| 1.6 | Monorepo tool | — / Turborepo | только для C |

---

## 2. Frontend

| # | Параметр | Решение | Примечание |
|---|----------|---------|------------|
| 2.1 | Фреймворк | Next.js 15.x (App Router) | |
| 2.2 | Стили | Tailwind CSS 4.x | |
| 2.3 | UI Kit | shadcn/ui / custom / не нужно | |
| 2.4 | State management | useState / Zustand 5.x | |
| 2.5 | Формы | React Hook Form + Zod / Server Actions | |
| 2.6 | Data fetching | Server Components / React Query 5.x | |
| 2.7 | i18n | не нужно / next-intl (языки: ...) | |
| 2.8 | SEO | Metadata API + JSON-LD / не нужно | |

---

## 3. Backend

| # | Параметр | Решение | Примечание |
|---|----------|---------|------------|
| 3.1 | Тип | Next.js API Routes / NestJS 11.x | |
| 3.2 | Валидация | Zod / class-validator | |
| 3.3 | API формат | REST / GraphQL | |
| 3.4 | Rate limiting | middleware / ThrottlerModule / не нужно | |
| 3.5 | Документация API | не нужно / Swagger | |

---

## 4. База данных

| # | Параметр | Решение | Примечание |
|---|----------|---------|------------|
| 4.1 | СУБД | PostgreSQL 17 (Neon) | |
| 4.2 | ORM | Prisma 6.x | |
| 4.3 | Роли БД | app_user + readonly_user | стандарт |
| 4.4 | Connection limit | [адаптивное — обсудить] | |
| 4.5 | statement_timeout | [адаптивное — обсудить] | |
| 4.6 | Кэш (Redis) | не нужно / Upstash Redis | |
| 4.7 | Очереди | не нужно / BullMQ + Redis | |

---

## 5. Аутентификация

| # | Параметр | Решение | Примечание |
|---|----------|---------|------------|
| 5.1 | Решение | Auth.js 5.x / Clerk | Auth.js — стандарт |
| 5.2 | Провайдеры | GitHub, Google, Email... | |
| 5.3 | Стратегия сессий | JWT / Database sessions | |
| 5.4 | Роли / RBAC | не нужно / USER, ADMIN, ... | |

---

## 6. Хранилище и CDN

| # | Параметр | Решение | Примечание |
|---|----------|---------|------------|
| 6.1 | Файловое хранилище | Cloudflare R2 / не нужно | R2 — стандарт |
| 6.2 | CDN | Vercel Edge / Cloudflare | |
| 6.3 | Оптимизация изображений | next/image | |

---

## 7. Внешние сервисы

| # | Параметр | Решение | Примечание |
|---|----------|---------|------------|
| 7.1 | Email / рассылки | не нужно / Resend / SendGrid | |
| 7.2 | Платежи | не нужно / Stripe / YooKassa | |
| 7.3 | Аналитика | не нужно / Vercel Analytics / PostHog | |
| 7.4 | Error tracking | не нужно / Sentry | |
| 7.5 | Поиск | не нужно / Algolia / Meilisearch | |
| 7.6 | Push / WebSocket | не нужно / Pusher / Ably | |
| 7.7 | SMS | не нужно / Twilio | |

---

## 8. DevOps и хостинг

| # | Параметр | Решение | Примечание |
|---|----------|---------|------------|
| 8.1 | Frontend хостинг | Vercel | |
| 8.2 | Backend хостинг | не нужно / Render / Fly.io | |
| 8.3 | CI/CD | GitHub Actions | |
| 8.4 | Docker | не нужно / Dockerfile | |
| 8.5 | WAF | не нужно / Cloudflare | |
| 8.6 | Мониторинг | не нужно / Sentry / Prometheus | |
| 8.7 | Логирование | console (dev) / Pino (prod) | |

---

## 9. Тестирование

| # | Параметр | Решение | Примечание |
|---|----------|---------|------------|
| 9.1 | Unit тесты | Vitest | |
| 9.2 | E2E тесты | не нужно / Playwright / Cypress | |
| 9.3 | Покрытие (цель) | [адаптивное — обсудить] | рекомендация ≥70% |
| 9.4 | API тесты | не нужно / supertest | |

---

## 10. Безопасность (обязательно)

> Пункты ниже — жёсткие практики. Отмечай по мере настройки.

| # | Параметр | Настроено? | Примечание |
|---|----------|------------|------------|
| 10.1 | CORS | [ ] | |
| 10.2 | CSRF защита | [ ] | |
| 10.3 | Helmet (NestJS) | [ ] / не нужно | |
| 10.4 | Валидация входных данных | [ ] | |
| 10.5 | argon2 для паролей | [ ] / нет паролей | |
| 10.6 | Rate limiting | [ ] | |
| 10.7 | Env-переменные (не в коде) | [ ] | |

---

## 11. Документация проекта

| # | Документ | Создан? | Примечание |
|---|----------|---------|------------|
| 11.1 | docs/BRIEF.md | [x] | заполнен до старта |
| 11.2 | docs/TECH_CARD.md | [x] | этот файл |
| 11.3 | docs/01-ARCHITECTURE.md | [ ] | после утверждения карты |
| 11.4 | docs/PROGRESS.md | [ ] | при начале разработки |
| 11.5 | README.md проекта | [ ] | |
| 11.6 | .env.example | [ ] | |

---

## Итог

**Всего пунктов:** ___
**Утверждено:** ___
**Не нужно:** ___
**Обсудить:** ___

> После утверждения всех пунктов → поменяй статус на **утверждено** и переходи к этапу 3 (инициализация).
